<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Reseñas Literarias — Video y Foro</title>
  <style>
    :root{
      --bg:#f8fafc;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#64748b;
      --primary:#4f46e5;
      --accent:#f59e0b;
      --radius:12px;
      --shadow:0 8px 24px rgba(15,23,42,0.06);
      font-family: "Poppins", Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column}
    header{position:fixed;top:0;left:0;right:0;background:linear-gradient(90deg,#fff,#fbfbff);border-bottom:1px solid #eef2ff;display:flex;align-items:center;justify-content:space-between;padding:12px 20px;z-index:30}
    .brand{display:flex;align-items:center;gap:12px}
    .brand .logo{width:40px;height:40px;border-radius:8px;background:var(--primary);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
    nav{display:flex;gap:8px;align-items:center}
    nav a{padding:10px 14px;border-radius:10px;text-decoration:none;color:var(--text);font-weight:600}
    nav a.active{background:rgba(79,70,229,0.12);color:var(--primary)}
    main{max-width:1100px;margin:84px auto;padding:20px;width:100%}
    .hero{background:var(--card);padding:20px;border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:18px}
    h1{margin:0;font-size:1.3rem}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
    .card{background:var(--card);padding:14px;border-radius:12px;box-shadow:var(--shadow)}
    .meta{color:var(--muted);font-size:0.92rem;margin-top:6px}
    .review-img{width:100%;height:160px;object-fit:cover;border-radius:8px;margin-bottom:10px;background:#f1f5f9;display:block}
    /* video */
    .video-wrap{background:var(--card);padding:14px;border-radius:12px;box-shadow:var(--shadow);display:none}
    .video-wrap video{width:100%;height:auto;border-radius:8px;display:block;background:#000}
    /* Forum */
    .forum{background:var(--card);padding:14px;border-radius:12px;box-shadow:var(--shadow);margin-top:14px}
    .forum-form{display:grid;gap:10px}
    .forum-form input,.forum-form textarea, .forum-form select{padding:10px;border-radius:10px;border:1px solid #e6edf3;font-family:inherit}
    .btn{background:var(--accent);border:none;color:#fff;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:700}
    .post{background:#fbfdff;padding:10px;border-radius:10px;border:1px solid #eef6ff}
    .post .hdr{display:flex;justify-content:space-between;align-items:center;gap:12px}
    .post .answers{margin-top:10px;margin-left:8px;display:flex;flex-direction:column;gap:8px}
    .reply{background:#fff;padding:8px;border-radius:8px;border:1px solid #eef2ff}
    .small{font-size:0.9rem;color:var(--muted)}
    .actions{display:flex;gap:8px;margin-top:8px}
    .outline{background:transparent;border:1px solid #e6edf3;padding:8px 10px;border-radius:8px;cursor:pointer}
    footer{text-align:center;color:var(--muted);padding:24px 10px;margin-top:20px}
    @media (max-width:800px){
      nav{gap:6px}
      .brand .logo{width:36px;height:36px}
    }
    /* Efecto suave al pasar el cursor sobre la imagen */
.review-img {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.review-img:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 16px rgba(0,0,0,0.15);
}

  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">RL</div>
      <div>
        <div style="font-weight:800">Reseñas Literarias</div>
        <div class="small" style="margin-top:2px">Libros, video y foro</div>
      </div>
    </div>
    <nav id="topNav" aria-label="Navegación principal">
      <a href="#" data-target="reseñas" class="active">Reseñas</a>
      <a href="#" data-target="video">Video</a>
      <a href="#" data-target="foro">Foro</a>
    </nav>
  </header>

  <main>
    <!-- RESEÑAS -->
    <section id="reseñas" aria-labelledby="reseñas-title">
      <div class="hero">
        <h1 id="reseñas-title">Reseñas</h1>
        <p class="small">Explora las reseñas completas de cada libro. Selecciona uno para ver más detalles o publicar en el foro.</p>
      </div>

      <div class="grid" id="reviewsGrid">
        <!-- Cards generated by JS -->
      </div>
    </section>
    <iframe 
  width="100%" 
  height="400"
  src="https://www.youtube.com/embed/hjV7vzOrXGU"
  title="Video de reseña"
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowfullscreen>
</iframe>

  </section>


    <!-- FORO -->
    <section id="foro" style="display:none">
      <div class="hero">
        <h1>Foro de Preguntas</h1>
        <p class="small">Responde las preguntas para cada libro. Selecciona el libro, completa las tres preguntas y publica.</p>
      </div>

      <div class="forum">
        <form id="forumForm" class="forum-form">
          <label class="small">Selecciona el libro</label>
          <select id="forumBook" required></select>

          <label class="small">Tu nombre</label>
          <input id="forumName" placeholder="Nombre" required />

          <label class="small">¿Qué te pareció el libro?</label>
          <textarea id="ans1" rows="2" placeholder="¿Qué te pareció el libro?" required></textarea>

          <label class="small">¿Qué parte o enseñanza te pareció más importante?</label>
          <textarea id="ans2" rows="2" placeholder="¿Qué enseñanza o parte fue la más importante?" required></textarea>

          <label class="small">¿Qué opinas del autor o del tema tratado?</label>
          <textarea id="ans3" rows="2" placeholder="Tu opinión sobre el autor o el tema" required></textarea>

          <div style="display:flex;gap:8px;align-items:center">
            <button class="btn" type="submit">Publicar en el foro</button>
            <button type="button" id="clearAll" class="outline">Borrar todo (local)</button>
          </div>
        </form>
      </div>

      <div id="postsContainer" style="margin-top:14px;display:grid;gap:12px"></div>
    </section>

    <footer>
      © 2025 Reseñas Literarias — Todos los derechos reservados por Ariel Urquilla.
    </footer>
  </main>

  <script>
    // Data: include the extended descriptions the user provided
    const reviews = {
      "1": {
        id: "1",
        title: "Academia Wirta para jóvenes sin poderes",
        meta: "Autora: Laila Soler · Fantasía",
        Image: "academia wirta.png",
        hasVideo: false,
        description: `En el mundo de Academia Wirta para jóvenes sin poderes, lo normal es tener poderes mágicos. Aquellos que no los poseen son considerados débiles o inferiores, lo que crea una sociedad desigual y discriminatoria.

La protagonista, Brigit, es una adolescente que aún no ha desarrollado su don, algo que preocupa profundamente a sus padres. En un intento por ayudarla, deciden enviarla a la Academia Wirta, un lugar donde jóvenes sin poderes aprenden a descubrir su potencial oculto.

En la academia, Brigit conoce a Orion, un chico misterioso que la ayuda a comprender que el verdadero poder no siempre es mágico, sino que puede encontrarse en la empatía, la amistad y la aceptación de uno mismo.

Laia Soler utiliza la fantasía como metáfora para hablar de la diversidad y la aceptación. El libro invita a reflexionar sobre la discriminación, la autoestima y la importancia de valorar a las personas por lo que son, no por lo que tienen o pueden hacer.

El mensaje principal es claro:
Todos poseemos un poder único, aunque no siempre sea visible.
La verdadera fuerza está en la cooperación, el respeto y la amistad sincera.`
      },
      "2": {
        id: "2",
        title: "Dos",
        meta: "Autor: Santiago García-Clairac · Misterio / Ciencia ficción",
        hasVideo: false,
        Image: "dos.png",
        description: `El libro Dos es una obra de misterio y ciencia ficción escrita por Santiago García-Clairac. Está formado por varios relatos, cada uno con personajes y situaciones diferentes, pero todos comparten un tono de intriga, reflexión y emoción.

La historia principal trata sobre Robert, un joven que construye un robot al que llama Dos. Al principio todo parece un simple experimento, pero el robot empieza a comportarse de forma independiente, lo que genera tensión y miedo.
A lo largo del relato se plantea una pregunta importante: ¿qué pasa cuando la creación supera al creador?

Además, el libro incluye otras historias, como la de Marianne, que vive un suceso aterrador en un castillo; Morgan, que se mete en un trabajo peligroso; Kodak, un detective del futuro; y Arnold, que viaja a Miami por una misión especial.

El autor combina la aventura, el misterio y la reflexión moral, logrando que el lector se cuestione los límites de la tecnología y las decisiones humanas.

Santiago García-Clairac explica que Dos es un libro pensado para hacer reflexionar a los jóvenes sobre las decisiones y la responsabilidad.
El autor comenta que quiso mostrar cómo los inventos o creaciones pueden volverse en contra de quien los hace, si no se usan con cuidado o ética.

También dice que el título Dos simboliza la relación entre el creador y su creación, y cómo esa “segunda parte” (el robot, la copia o la sombra del ser humano) puede llegar a tener vida propia.`
      },
      "3": {
        id: "3",
        title: "Supervivencia Extrema",
        meta: "Autor: Arturo Padilla · Aventura",
        hasVideo: false,
        Image:"supervivencia.png",
        description: `Supervivencia extrema nos transporta a una emocionante aventura en la que un grupo de jóvenes participa en un reality show ambientado en la peligrosa selva amazónica. El desafío es simple, pero mortal: sobrevivir por sus propios medios enfrentando los peligros de la naturaleza y las tensiones entre ellos.

De los veinte concursantes iniciales, solo quedan cuatro finalistas: Eneko, Javi, Mariona e Isa. A medida que la competencia avanza, los límites entre el juego y la realidad comienzan a desdibujarse. Lo que empezó como un programa televisivo se convierte en una lucha real por la supervivencia, donde el ingenio, la valentía y la confianza mutua serán las claves para salir con vida.

Arturo Padilla plantea una historia que combina aventura, tensión y reflexión. Más allá de la emoción del concurso, el libro invita a pensar sobre:

- La presión social y mediática de los reality shows.
- El valor de la cooperación y la solidaridad frente al egoísmo.
- La fortaleza interior que surge en los momentos más difíciles.

El mensaje principal es que la supervivencia no depende solo de la fuerza física, sino también de la capacidad de adaptarse, confiar y mantener la humanidad incluso en las circunstancias más extremas.`
      },
      "4": {
        id: "4",
        title: "El día que todo cambió",
        meta: "Autores: Martín Blasco, Flor Canosa · Misterio / Ciencia ficción",
        Image:"todo cambio.png",
        hasVideo: false,
        description: `La historia comienza cuando Paula, una joven que padece nictalopía (una dificultad para ver en la oscuridad), recibe la visita inesperada de su padre después de diez años sin verlo.
Esa misma tarde, un meteorito cae cerca del pueblo de Villa Küyen, y junto a él aparecen unas luces misteriosas que solo Paula puede ver.

Intrigada, decide acompañar a su padre para investigar el fenómeno. A medida que se adentran en el misterio, Paula descubre que esas luces no solo están ligadas al meteorito, sino también al pasado de su familia y a un cambio profundo que afectará a todos los habitantes del pueblo.

El libro combina suspenso, ciencia ficción y emoción familiar, mostrando cómo Paula debe superar sus miedos, confiar en sí misma y aprender a ver más allá de lo que los demás perciben.

El libro enseña que los cambios pueden dar miedo, pero también pueden traer nuevas oportunidades.
A través de Paula, los autores muestran la importancia de la confianza, la familia y la perseverancia incluso cuando el mundo parece volverse oscuro.`
      },
      "5": {
        id: "5",
        title: "El Olympos. La Última. Parte II",
        meta: "Autora: Muriel Villanueva · Ciencia ficción / Distopía",
        hasVideo: false,
        Image:"olympus.png",
        description: `El Olympos. La Última. Parte II es la continuación de la historia de Una y Der, dos jóvenes que viven en un mundo controlado por un sistema autoritario conocido como el Olympos. En esta sociedad futurista, la humanidad ha sido manipulada por el poder y la tecnología, y los jóvenes son utilizados como símbolos de esperanza, pero en realidad viven bajo una falsa libertad.

A lo largo del libro, Una y Der fortalecen su amistad y su confianza mutua, mientras intentan descubrir las verdaderas causas de la crisis mundial que cambió el destino de la humanidad. Acompañados por Will y Zo, comienzan a desafiar las reglas del sistema y a cuestionar el papel que se les ha impuesto como simples herramientas del poder.

En su viaje, los personajes aprenden que la única forma de resistir es unirse y creer en sus propias decisiones. La obra combina momentos de acción, reflexión y emoción, mostrando cómo la fuerza de la empatía y la unión puede superar incluso los sistemas más opresivos.

Muriel Villanueva usa la ciencia ficción como un espejo de nuestra realidad.
A través de esta historia, plantea temas profundos como:
- La búsqueda de libertad frente al control.
- La manipulación de la verdad por parte del poder.
- La cooperación como clave para sobrevivir.`
      }
    };

    // Render reviews grid
    const reviewsGrid = document.getElementById('reviewsGrid');
    Object.values(reviews).forEach(r=>{
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <img class="review-img" alt="${r.title}" src="${r.image || 'placeholder.png'}" onerror="this.src='placeholder.png'" />
        <div style="font-weight:800">${r.title}</div>
        <div class="meta">${r.meta}</div>
        <p style="margin-top:8px">${r.description.slice(0,220)}...</p>
        <div style="margin-top:10px"><button class="outline" data-id="${r.id}" data-action="view">Ver detalle</button></div>
      `;
      reviewsGrid.appendChild(card);
    });

    // Top nav behavior
    const nav = document.getElementById('topNav');
    nav.addEventListener('click', e=>{
      const a = e.target.closest('a');
      if(!a) return;
      e.preventDefault();
      document.querySelectorAll('#topNav a').forEach(x=>x.classList.remove('active'));
      a.classList.add('active');
      const target = a.dataset.target;
      showSection(target);
    });

    function showSection(id){
      document.querySelectorAll('main > section').forEach(s=> s.style.display = 'none');
      const el = document.getElementById(id);
      if(el) el.style.display = 'block';
      // Special handling
      if(id === 'video') {
        document.getElementById('videoWrap').style.display = 'block';
        // attempt to load video; it's local file so must be in same folder
      } else {
        document.getElementById('videoWrap').style.display = 'none';
      }
      if(id === 'foro') {
        populateForumBooks();
        renderAllPosts();
      }
    }

    // View detail modal-like in reseñas section (simple)
    document.addEventListener('click', e=>{
      const btn = e.target.closest('button[data-action="view"]');
      if(!btn) return;
      const id = btn.dataset.id;
      openDetail(id);
    });

    function openDetail(id){
      const r = reviews[id];
      // create modal-like detail below hero
      const existing = document.getElementById('detailBox');
      if(existing) existing.remove();
      const box = document.createElement('div');
      box.id = 'detailBox';
      box.className = 'card';
      box.style.marginTop = '14px';
      box.innerHTML = `
        <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:12px">
          <div style="flex:1">
            <h2 style="margin:0">${r.title}</h2>
            <div class="meta">${r.meta}</div>
            <p style="margin-top:12px;white-space:pre-line">${r.description}</p>
          </div>
          <div style="min-width:220px;margin-left:12px">
            <div style="background:#f1f5f9;padding:10px;border-radius:8px"><strong>Enlace rápido</strong>
              <div style="margin-top:8px"><button class="outline" data-action="open-foro" data-id="${r.id}">Ver en Foro</button></div>
            </div>
          </div>
        </div>
        <div style="margin-top:12px;text-align:right"><button class="outline" id="closeDetail">Cerrar</button></div>
      `;
      document.getElementById('reseñas').appendChild(box);
      document.getElementById('closeDetail').addEventListener('click', ()=> box.remove());
    }

    // Forum logic: store posts per book in localStorage, each post contains three answers and replies
    const FORO_KEY = 'foro_resenas_v3';

    function getAllPosts(){ return JSON.parse(localStorage.getItem(FORO_KEY) || '{}'); }
    function saveAllPosts(obj){ localStorage.setItem(FORO_KEY, JSON.stringify(obj)); }

    function populateForumBooks(){
      const sel = document.getElementById('forumBook');
      sel.innerHTML = '';
      Object.values(reviews).forEach(r=>{
        const opt = document.createElement('option');
        opt.value = r.id;
        opt.textContent = r.title;
        sel.appendChild(opt);
      });
    }

    // Handle form submit -> new post
    document.getElementById('forumForm').addEventListener('submit', e=>{
      e.preventDefault();
      const bookId = document.getElementById('forumBook').value;
      const name = document.getElementById('forumName').value.trim();
      const a1 = document.getElementById('ans1').value.trim();
      const a2 = document.getElementById('ans2').value.trim();
      const a3 = document.getElementById('ans3').value.trim();
      if(!bookId || !name || !a1 || !a2 || !a3) return alert('Completa todos los campos.');
      const all = getAllPosts();
      if(!all[bookId]) all[bookId] = [];
      const post = { id: Date.now().toString(), name, date:new Date().toISOString(), answers:{ q1:a1, q2:a2, q3:a3 }, replies:[] };
      all[bookId].push(post);
      saveAllPosts(all);
      document.getElementById('forumForm').reset();
      renderAllPosts();
      // switch to posts view scroll
      setTimeout(()=>{
        const el = document.getElementById('post-'+post.id);
        if(el) el.scrollIntoView({behavior:'smooth', block:'center'});
      },120);
    });

    document.getElementById('clearAll').addEventListener('click', ()=>{
      if(confirm('Eliminar todos los posts guardados en este navegador?')){
        localStorage.removeItem(FORO_KEY);
        renderAllPosts();
      }
    });

    // Render all posts grouped by book
    function renderAllPosts(){
      const container = document.getElementById('postsContainer');
      container.innerHTML = '';
      const all = getAllPosts();
      Object.values(reviews).forEach(r=>{
        const group = document.createElement('div');
        group.innerHTML = `<h3 style="margin:0 0 8px 0">${r.title}</h3>`;
        const posts = all[r.id] || [];
        if(posts.length===0){
          const p = document.createElement('div');
          p.className = 'post';
          p.innerHTML = `<div class="small">Aún no hay publicaciones para este libro.</div>`;
          group.appendChild(p);
        } else {
          posts.slice().reverse().forEach(post=>{
            const p = document.createElement('div');
            p.className = 'post';
            p.id = 'post-'+post.id;
            p.innerHTML = `
              <div class="hdr"><div><strong>${post.name}</strong> <span class="small">• ${new Date(post.date).toLocaleString()}</span></div>
                <div>
                  <button class="outline" data-action="reply" data-post="${post.id}" data-book="${r.id}">Responder</button>
                  <button class="outline" data-action="delete" data-post="${post.id}" data-book="${r.id}">Eliminar</button>
                </div>
              </div>
              <div style="margin-top:8px"><strong>¿Qué te pareció el libro?</strong><div>${escapeHtml(post.answers.q1)}</div></div>
              <div style="margin-top:8px"><strong>¿Qué parte o enseñanza fue la más importante?</strong><div>${escapeHtml(post.answers.q2)}</div></div>
              <div style="margin-top:8px"><strong>¿Qué opinas del autor o del tema tratado?</strong><div>${escapeHtml(post.answers.q3)}</div></div>
              <div class="answers" id="answers-${post.id}"></div>
              <div class="reply-form-container" id="reply-form-${post.id}" style="display:none;margin-top:8px">
                <input placeholder="Tu nombre" class="reply-name" style="padding:8px;border-radius:8px;border:1px solid #e6edf3"/>
                <textarea placeholder="Escribe tu respuesta" class="reply-text" rows="2" style="padding:8px;border-radius:8px;border:1px solid #e6edf3;margin-top:6px"></textarea>
                <div style="display:flex;gap:8px;margin-top:6px">
                  <button class="btn" data-action="send-reply" data-post="${post.id}" data-book="${r.id}">Enviar respuesta</button>
                  <button class="outline" data-action="cancel-reply" data-post="${post.id}" data-book="${r.id}">Cancelar</button>
                </div>
              </div>
            `;
            group.appendChild(p);
            // render existing replies
            const answersDiv = p.querySelector('#answers-'+post.id);
            if(post.replies && post.replies.length){
              post.replies.forEach(rep=>{
                const repDiv = document.createElement('div');
                repDiv.className = 'reply';
                repDiv.innerHTML = `<strong>${rep.name}</strong> <span class="small">• ${new Date(rep.date).toLocaleString()}</span><div style="margin-top:6px">${escapeHtml(rep.text)}</div>`;
                answersDiv.appendChild(repDiv);
              });
            }
          });
        }
        container.appendChild(group);
      });
    }

    // Event delegation for replies and deletes
    document.addEventListener('click', e=>{
      const btn = e.target.closest('button');
      if(!btn) return;
      const action = btn.dataset.action;
      if(action === 'reply'){
        const postId = btn.dataset.post;
        const form = document.getElementById('reply-form-'+postId);
        if(form) form.style.display = form.style.display === 'none' ? 'block' : 'none';
      } else if(action === 'cancel-reply'){
        const postId = btn.dataset.post;
        const form = document.getElementById('reply-form-'+postId);
        if(form) form.style.display = 'none';
      } else if(action === 'send-reply'){
        const postId = btn.dataset.post;
        const bookId = btn.dataset.book;
        const form = document.getElementById('reply-form-'+postId);
        const name = form.querySelector('.reply-name').value.trim();
        const text = form.querySelector('.reply-text').value.trim();
        if(!name || !text) return alert('Completa nombre y respuesta.');
        const all = getAllPosts();
        const bookPosts = all[bookId] || [];
        const pIndex = bookPosts.findIndex(x=>x.id === postId);
        if(pIndex === -1) return;
        if(!bookPosts[pIndex].replies) bookPosts[pIndex].replies = [];
        bookPosts[pIndex].replies.push({ name, text, date: new Date().toISOString() });
        saveAllPosts(all);
        renderAllPosts();
      } else if(action === 'delete'){
        const postId = btn.dataset.post;
        const bookId = btn.dataset.book;
        if(!confirm('Eliminar esta publicación?')) return;
        const all = getAllPosts();
        if(!all[bookId]) return;
        const idx = all[bookId].findIndex(p=>p.id === postId);
        if(idx === -1) return;
        all[bookId].splice(idx,1);
        saveAllPosts(all);
        renderAllPosts();
      } else if(action === 'open-foro'){
        const bookId = btn.dataset.id;
        // switch to foro tab and preselect book
        document.querySelectorAll('#topNav a').forEach(x=>x.classList.remove('active'));
        document.querySelector('#topNav a[data-target="foro"]').classList.add('active');
        showSection('foro');
        setTimeout(()=>{
          const sel = document.getElementById('forumBook');
          sel.value = bookId;
        },200);
      }
    });

    // small helper to escape HTML to avoid XSS via localStorage content
    function escapeHtml(str){
      if(!str) return '';
      return String(str)
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#039;');
    }

    // init
    populateForumBooks();
    renderAllPosts();
    // ensure reseñas tab shown by default
    showSection('reseñas');
  </script>
</body>
</html>
